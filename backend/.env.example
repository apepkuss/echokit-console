# =============================================================================
# EchoKit Backend 环境变量配置
# =============================================================================

# -----------------------------------------------------------------------------
# 服务器配置
# -----------------------------------------------------------------------------
# 服务监听地址
# 0.0.0.0 表示监听所有网络接口
SERVER_ADDR=0.0.0.0

# 服务监听端口
SERVER_PORT=3000

# -----------------------------------------------------------------------------
# 数据库配置
# -----------------------------------------------------------------------------
# PostgreSQL 连接字符串
# 格式: postgres://用户名:密码@主机:端口/数据库名
# Docker 环境中主机名使用容器名（如 postgres）
DATABASE_URL=postgres://echokit:echokit@localhost:5432/echokit

# -----------------------------------------------------------------------------
# Redis 配置
# -----------------------------------------------------------------------------
# Redis 连接地址（用于设备激活码缓存）
# Docker 环境中主机名使用容器名（如 redis）
REDIS_URL=redis://localhost:6379

# 激活码有效期（秒）
# 设备需在此时间内完成激活，否则激活码失效
ACTIVATION_TTL_SECONDS=300

# -----------------------------------------------------------------------------
# JWT 认证配置
# -----------------------------------------------------------------------------
# JWT 签名密钥
# ⚠️ 生产环境必须更改为强随机字符串！
# JWT_SECRET=your-secure-random-secret-here

# JWT Token 有效期（秒）
# 默认 7 天 = 604800 秒
# JWT_EXPIRATION=604800

# -----------------------------------------------------------------------------
# Docker 容器管理配置
# -----------------------------------------------------------------------------
# EchoKit Server Docker 镜像
DOCKER_IMAGE=secondstate/echokit:latest-server-vad

# 配置文件目录（存放 AI 模型配置）
CONFIG_DIR=./data/configs

# 录音文件目录
RECORD_DIR=./data/records

# 欢迎语音频文件路径
HELLO_WAV_PATH=./data/hello.wav

# 容器端口范围
# 每个 EchoKit Server 容器分配一个端口
PORT_RANGE_START=8080
PORT_RANGE_END=8180

# -----------------------------------------------------------------------------
# Proxy 连接配置
# -----------------------------------------------------------------------------
# Proxy 对外访问地址（设备激活成功后返回给设备）
# 自动构建为: ws://{PROXY_EXTERNAL_HOST}:{PROXY_EXTERNAL_PORT}/ws
PROXY_EXTERNAL_HOST=192.168.0.103
PROXY_EXTERNAL_PORT=10086

# 也可以直接设置完整 URL 覆盖自动生成
# PROXY_WS_URL=ws://proxy.example.com:10086/ws

# -----------------------------------------------------------------------------
# 外部访问配置
# -----------------------------------------------------------------------------
# Backend 服务对外访问地址
# 用于替换容器 WebSocket URL 中的 localhost
# 设置为服务器的实际 IP 地址或域名，以便外部设备访问
EXTERNAL_HOST=192.168.0.103
