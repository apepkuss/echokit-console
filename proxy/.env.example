# =============================================================================
# EchoKit Proxy 环境变量配置
# =============================================================================

# -----------------------------------------------------------------------------
# 数据库配置
# -----------------------------------------------------------------------------
# PostgreSQL 连接字符串
# 格式: postgres://用户名:密码@主机:端口/数据库名
# Docker 环境中主机名使用容器名（如 postgres）
DATABASE_URL=postgres://echokit:echokit@localhost:5432/echokit

# 数据库连接池大小
# 根据并发连接数调整，建议值: 5-20
DB_POOL_SIZE=10

# -----------------------------------------------------------------------------
# 服务端口配置
# -----------------------------------------------------------------------------
# Proxy 主服务端口（WebSocket + HTTP API 代理）
# 设备通过此端口连接 Proxy
PROXY_PORT=10086

# 健康检查端口
# 用于 Docker/K8s 健康检查探针
HEALTH_CHECK_PORT=10087

# -----------------------------------------------------------------------------
# WebSocket 配置
# -----------------------------------------------------------------------------
# WebSocket 连接超时时间（秒）
# 超过此时间无活动的连接将被关闭
WS_TIMEOUT=300

# -----------------------------------------------------------------------------
# EchoKit Server 连接配置
# -----------------------------------------------------------------------------
# EchoKit Server 容器的主机地址
# - 本地开发: localhost
# - Docker 环境: host.docker.internal（访问宿主机上的容器）
ECHOKIT_HOST=localhost

# -----------------------------------------------------------------------------
# Backend API 配置
# -----------------------------------------------------------------------------
# Backend API 服务地址（用于 HTTP 代理转发）
# Docker 环境中使用容器名（如 backend）
BACKEND_URL=http://localhost:3000

# HTTP 代理请求超时时间（毫秒）
HTTP_PROXY_TIMEOUT_MS=30000

# -----------------------------------------------------------------------------
# 日志配置
# -----------------------------------------------------------------------------
# 日志级别: trace, debug, info, warn, error
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# 对外访问地址（分布式部署时配置）
# -----------------------------------------------------------------------------
# Proxy 对外访问 IP 地址或域名
# 当 backend 和 proxy 部署在不同机器时，backend 需要此信息构建 PROXY_WS_URL
EXTERNAL_HOST=192.168.0.103

# Proxy 对外访问端口
# 通常与 PROXY_PORT 相同，除非使用端口映射
EXTERNAL_PORT=10086
